var $=Object.defineProperty,W=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var P=(n,a,t)=>a in n?$(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t,h=(n,a)=>{for(var t in a||(a={}))q.call(a,t)&&P(n,t,a[t]);if(B)for(var t of B(a))H.call(a,t)&&P(n,t,a[t]);return n},y=(n,a)=>W(n,_(a));import{a as b,j as o,G as w,b as e,B as l,T as s,u as z,c as I,d as L,F as T,e as N,f as F,g as M,I as Q,S as D,L as G,D as V,h as K,i as g,r as A,k as Y,l as k,m as R,n as U,o as J,Q as X,R as Z,p as ee,q as te,s as ne}from"./vendor.fb5d9e9e.js";const ae=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}};ae();const E="https://citas-veterinaria-app.herokuapp.com/api",re=async()=>{const{data:n}=await b.get(`${E}/appointments`);return n},ie=async n=>{const{data:a}=await b.post(`${E}/appointments`,n);return a},oe=async([n,a])=>{const{data:t}=await b.put(`${E}/appointments/${n}`,a);return t},le=async n=>{const{data:a}=await b.delete(`${E}/appointments/${n}`);return a};var se="/assets/logo.9437a450.png";const ce=()=>o(w,{container:!0,justifyContent:"center",alignItems:"center",sx:{boxShadow:2},children:[e(l,{m:5,children:e("img",{src:se,alt:"logo",width:"350"})}),o(s,{variant:"h2",color:"primary",align:"center",xs:12,mr:{xl:50},sx:{fontWeight:"bold"},flexGrow:1,children:["Gesti\xF3n de"," ",e(s,{variant:"h2",color:"primary.defect",component:"span",children:"Citas"})]})]}),de=({appointment:n,setEdit:a})=>{const{hour:t,petName:c,ownerName:r,email:i,symptom:m,_id:x}=n,p=z("(min-width:600px)"),u=I(),{mutate:C}=L(le,{onSuccess:()=>{u.invalidateQueries([])}}),v=async f=>{try{C(f)}catch(S){console.log(S)}},d=()=>{D.fire({title:"Eliminar la cita?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ad0b34",cancelButtonColor:"#4a0788",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(f=>{f.isConfirmed&&(D.fire({title:"Eliminada!",icon:"success",showConfirmButton:!1,timer:2e3}),v(x))})};return o(l,{sx:{alignItems:"center",bgcolor:"white",borderRadius:2,boxShadow:1,display:"flex",marginLeft:1,marginBottom:3,marginTop:-1,justifyContent:"space-between",padding:"15px"},children:[o(l,{sx:{width:"8%",height:"100px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"yellowgreen",borderRadius:2},children:[e(s,{sx:{fontSize:{md:"15px",xs:"10px"}},children:"HORA"}),e(s,{color:"primary",fontWeight:"900",sx:{fontSize:{md:"15px",xs:"10px"}},children:t})]}),o(l,{sx:{width:{lg:"75%",xs:"70%"}},children:[o(l,{children:[o(l,{sx:{display:"flex",flexDirection:{xs:"column"}},children:[o(l,{sx:{display:"flex",marginY:"10px"},children:[e(s,{marginLeft:"20px",variant:"subtitle1",children:"Mascota:"}),e(s,{marginLeft:"10px",fontWeight:"900",color:"primary",variant:"subtitle1",children:c})]}),o(l,{sx:{display:"flex"},children:[e(s,{marginLeft:"20px",variant:"subtitle1",children:"Propietario:"}),e(s,{marginLeft:"10px",fontWeight:"900",color:"primary",variant:"subtitle1",children:r})]})]}),o(l,{sx:{display:"flex",marginY:"10px"},children:[e(s,{marginLeft:"20px",variant:"subtitle1",children:"Email/Tel\xE9fono:"}),e(s,{marginLeft:"10px",fontWeight:"900",color:"primary",variant:"subtitle1",children:i})]})]}),o(l,{sx:{display:"flex"},children:[e(s,{marginLeft:"20px",variant:"subtitle1",children:"S\xEDntomas:"}),e(s,{marginLeft:"10px",fontWeight:"900",color:"primary",variant:"subtitle1",children:m})]})]}),e(l,{sx:{display:"flex",flexDirection:"column",height:"100px",justifyContent:"space-around"},children:p?o(T,{children:[e(N,{onClick:()=>a(n),variant:"contained",startIcon:e(F,{}),children:"Editar"}),e(N,{onClick:d,variant:"contained",startIcon:e(M,{}),children:"Eliminar"})]}):o(T,{children:[e(Q,{"aria-label":"delete",onClick:()=>a(n),children:e(F,{color:"primary"})}),e(Q,{"aria-label":"delete",onClick:d,children:e(M,{color:"primary"})})]})})]})},me=({setEdit:n,appointment:a,status:t,value:c,setValue:r})=>{const i=m=>r(m);return t==="loading"?e(s,{variant:"h4",color:"primary",marginTop:"4%",textAlign:"center",children:"Cargando, un momento por favor..."}):t==="error"?o(T,{children:[e(s,{variant:"h4",color:"primary",marginTop:"4%",textAlign:"center",children:"Error al consultar las citas"}),e(s,{variant:"h5",color:"primary",marginTop:"4%",textAlign:"center",children:"Te pedimos disculpas por el inconveniente. Verifica tu conexi\xF3n a internet o intenta conectarte m\xE1s tarde."})]}):o(l,{display:"flex",alignItems:"space-between",flexDirection:"column",justifyContent:"center",children:[o(l,{display:"flex",sx:{justifyContent:"space-around",marginTop:"2%"},children:[e(l,{children:a[0]?e(s,{variant:"h5",color:"#4a0788",marginTop:"3%",marginBottom:"1%",children:`Citas del ${a[0].day}`}):e(s,{variant:"h5",color:"primary",marginTop:"3%",textAlign:"center",children:"No hay citas para este d\xEDa"})}),e(l,{children:e(G,{dateAdapter:V,children:e(K,{label:"Buscar por d\xEDa",inputFormat:"dd/MM/yyyy",value:c,onChange:i,renderInput:m=>e(g,h({},m))})})})]}),e(l,{marginTop:"30px",children:a==null?void 0:a.map(m=>e(de,{appointment:m,setEdit:n},m._id))})]})},j={petName:"",ownerName:"",email:"",day:"",hour:"",symptom:""},ue=({edit:n,setEdit:a})=>{const[t,c]=A.exports.useState(j),r=I(),i=Object.entries(n).length===0,{mutate:m}=L(ie,{onSuccess:()=>r.invalidateQueries(["appointments"])}),{mutate:x}=L(oe,{onSuccess:d=>{r.invalidateQueries(["appointments"]),r.setQueryData(["appointments",{id:d.id}],d)}});A.exports.useEffect(()=>{i||c({petName:n.petName,ownerName:n.ownerName,email:n.email,day:n.day,hour:n.hour,symptom:n.symptom})},[n]);const p=d=>{const f=new Date(d.target.value),S=k(f,"PPPP",{locale:R}),O=k(f,"HH:mm");c(y(h({},t),{day:S,hour:O}))},u=d=>{switch(d.target.id){case"petName":c(y(h({},t),{petName:d.target.value}));break;case"ownerName":c(y(h({},t),{ownerName:d.target.value}));break;case"email":c(y(h({},t),{email:d.target.value}));break;case"symptom":c(y(h({},t),{symptom:d.target.value}));break}},C=()=>{if(t.petName===""||t.ownerName===""||t.email===""||t.day===""||t.symptom===""){v("noData");return}else{try{i?m(t):x([n._id,t])}catch(d){console.log(d)}v("saveData")}},v=d=>{switch(d){case"noData":D.fire({title:"Error!",text:"No dejes campos sin rellenar",icon:"error",confirmButtonText:"OK"});break;case"saveData":D.fire({title:"OK!",text:i?"La cita se agend\xF3 correctamente":"La cita se actualiz\xF3 correctamente",icon:"success",showConfirmButton:!1,timer:2e3}),a({}),c(j);break}};return o(l,{display:"flex",alignItems:"center",flexDirection:"column",children:[e(s,{variant:"h4",color:"#4a0788",marginTop:"3%",marginBottom:"1%",textAlign:"center",children:i?"Agendar Cita Nueva":"Editar Cita"}),e(l,{sx:{bgcolor:"white",boxShadow:2,borderRadius:2,margin:"1.6%",padding:"1%",width:"95%"},children:o(Y,{onSubmit:C,sx:{display:"flex"},children:[o(l,{display:"flex",justifyContent:"center",children:[e(g,{type:"text",id:"petName",label:"Nombre Mascota",onChange:u,sx:{m:1,width:"50%"},value:t.petName}),e(g,{type:"text",id:"ownerName",label:"Propietario",onChange:u,sx:{m:1,width:"50%"},value:t.ownerName})]}),o(l,{display:"flex",justifyContent:"center",children:[e(g,{id:"email",label:"Email / Tel\xE9fono",onChange:u,sx:{m:1,width:"50%"},type:"email",value:t.email}),e(g,{id:"date",sx:{m:1,width:"50%"},type:"datetime-local",onChange:p,value:t.date})]}),e(l,{display:"flex",justifyContent:"center",children:e(g,{type:"text",id:"symptom",label:"S\xEDntomas",onChange:u,sx:{m:1,width:"100%"},multiline:!0,maxRows:6,value:t.symptom})}),o(l,{display:"flex",justifyContent:"center",children:[e(N,{variant:"contained",sx:{m:1,width:"100%",alignSelf:"center",borderRadius:2,backgroundColor:"#4a0788"},onClick:C,children:i?"Agendar Cita Nueva":"Editar Cita"}),!i&&e(N,{variant:"contained",sx:{m:1,width:"100%",alignSelf:"center",borderRadius:2,backgroundColor:"#4a0788"},onClick:()=>{a({}),c(j)},children:"Cancelar Editar"})]})]})})]})};const pe=new Date,he=()=>{const[n,a]=A.exports.useState({}),[t,c]=A.exports.useState(pe),{data:r,status:i}=U(["appointments"],re),m=k(t,"PPPP",{locale:R}),x=r==null?void 0:r.filter(p=>p.day===m).sort((p,u)=>{if(p.hour<u.hour)return-1;if(u.hour>p.hour)return 1});return o(l,{children:[e(w,{children:e(ce,{})}),o(w,{container:!0,p:2,bgcolor:"#cccccc33",minHeight:"100vh",sx:{display:"flex",flexDirection:{xl:"row",xxs:"column"}},children:[e(w,{item:!0,md:12,xl:6,sx:{justifyContent:"center",alignItems:"center",width:"100%"},children:e(ue,{edit:n,setEdit:a,appointment:x})}),e(w,{item:!0,md:12,xl:6,sx:{justifyContent:"center",alignItems:"center",width:"100%"},children:e(me,{edit:n,setEdit:a,appointment:x,status:i,value:t,setValue:c})})]})]})},xe=J({palette:{primary:{defect:"#4e555a",main:"#4a0788"}}}),fe=new X;Z.render(e(ee.StrictMode,{children:e(te,{theme:xe,children:e(ne,{client:fe,children:e(he,{})})})}),document.getElementById("root"));
