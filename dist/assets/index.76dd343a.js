var R=Object.defineProperty,O=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var B=(n,a,t)=>a in n?R(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t,f=(n,a)=>{for(var t in a||(a={}))$.call(a,t)&&B(n,t,a[t]);if(k)for(var t of k(a))W.call(a,t)&&B(n,t,a[t]);return n},x=(n,a)=>O(n,Q(a));import{a as b,j as c,G as h,b as e,B as m,T as o,u as P,c as L,F,d as C,e as _,f as q,S as N,L as H,D as V,g as G,h as y,r as S,i as K,k as T,l as j,m as z,n as Y,Q as U,R as J,o as X,p as Z,q as ee}from"./vendor.5657761c.js";const te=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}};te();const A="https://citas-veterinaria-app.herokuapp.com",ne=async()=>{const{data:n}=await b.get(`${A}/appointments`);return n},ae=async n=>{const{data:a}=await b.post(`${A}/appointments`,n);return a},re=async([n,a])=>{const{data:t}=await b.put(`${A}/appointments/${n}`,a);return t},ie=async n=>{const{data:a}=await b.delete(`${A}/appointments/${n}`);return a};var oe="/assets/logo.9437a450.png";const le=()=>c(h,{container:!0,justifyContent:"center",alignItems:"center",sx:{boxShadow:2},children:[e(m,{m:5,children:e("img",{src:oe,alt:"logo",width:"350"})}),c(o,{variant:"h2",color:"primary",align:"center",xs:12,mr:{xl:50},sx:{fontWeight:"bold"},flexGrow:1,children:["Gesti\xF3n de"," ",e(o,{variant:"h2",color:"primary.defect",component:"span",children:"Citas"})]})]}),ce=({appointment:n,setEdit:a})=>{const{hour:t,petName:l,ownerName:r,email:i,symptom:s,_id:g}=n,p=P(),{mutate:u}=L(ie,{onSuccess:()=>{p.invalidateQueries([])}}),w=async d=>{try{u(d)}catch(v){console.log(v)}};return e(F,{children:c(m,{sx:{bgcolor:"white",boxShadow:1,borderRadius:2,marginLeft:1,marginBottom:2,width:"95%",alignSelf:"center",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"15px"},children:[c(m,{sx:{width:"8%",height:"100px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-around",backgroundColor:"yellowgreen",borderRadius:2},children:[e(o,{children:"HORA"}),e(o,{color:"primary",fontWeight:"900",children:t})]}),c(m,{sx:{width:"75%"},children:[c(m,{children:[c(m,{sx:{display:"flex"},children:[e(o,{marginLeft:"20px",variant:"subtitle1",children:"Mascota:"}),e(o,{marginLeft:"10px",fontWeight:"900",color:"primary",variant:"subtitle1",children:l}),e(o,{marginLeft:"20px",variant:"subtitle1",children:"Propietario:"}),e(o,{marginLeft:"10px",fontWeight:"900",color:"primary",variant:"subtitle1",children:r})]}),c(m,{sx:{display:"flex",marginY:"10px"},children:[e(o,{marginLeft:"20px",variant:"subtitle1",children:"Email/Tel\xE9fono:"}),e(o,{marginLeft:"10px",fontWeight:"900",color:"primary",variant:"subtitle1",children:i})]})]}),c(m,{sx:{display:"flex"},children:[e(o,{marginLeft:"20px",variant:"subtitle1",children:"S\xEDntomas:"}),e(o,{marginLeft:"10px",fontWeight:"900",color:"primary",variant:"subtitle1",children:s})]})]}),c(m,{sx:{display:"flex",flexDirection:"column",width:"15%"},children:[e(C,{onClick:()=>a(n),variant:"contained",startIcon:e(_,{}),sx:{marginBottom:"20px"},children:"Editar"}),e(C,{onClick:()=>{N.fire({title:"Eliminar la cita?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#ad0b34",cancelButtonColor:"#4a0788",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar"}).then(d=>{d.isConfirmed&&(N.fire({title:"Eliminada!",icon:"success",showConfirmButton:!1,timer:2e3}),w(g))})},variant:"contained",startIcon:e(q,{}),children:"Eliminar"})]})]})})},se=({setEdit:n,appointment:a,status:t,value:l,setValue:r})=>{const i=s=>r(s);return t==="loading"?e(o,{variant:"h4",color:"primary",marginTop:"4%",textAlign:"center",children:"Cargando, un momento por favor..."}):t==="error"?c(F,{children:[e(o,{variant:"h4",color:"primary",marginTop:"4%",textAlign:"center",children:"Error al consultar las citas"}),e(o,{variant:"h5",color:"primary",marginTop:"4%",textAlign:"center",children:"Te pedimos disculpas por el inconveniente. Verifica tu conexi\xF3n a internet o intenta conectarte m\xE1s tarde."})]}):c(h,{display:"flex",flexDirection:"column",children:[c(m,{display:"flex",alignSelf:"center",width:"97%",justifyContent:"center",children:[e(m,{flex:"1",children:a[0]?e(o,{variant:"h4",color:"primary",marginTop:"4%",children:`Citas del ${a[0].day}`}):e(o,{variant:"h4",color:"primary",marginTop:"3%",textAlign:"center",children:"No hay citas para este d\xEDa"})}),e(m,{children:e(H,{dateAdapter:V,children:e(G,{label:"Buscar por d\xEDa",inputFormat:"dd/MM/yyyy",value:l,onChange:i,renderInput:s=>e(y,f({},s))})})})]}),e(m,{marginTop:"30px",children:a==null?void 0:a.map(s=>e(ce,{appointment:s,setEdit:n},s._id))})]})},D={petName:"",ownerName:"",email:"",day:"",hour:"",symptom:""},de=({edit:n,setEdit:a})=>{const[t,l]=S.exports.useState(D),r=P(),i=Object.entries(n).length===0,{mutate:s}=L(ae,{onSuccess:()=>r.invalidateQueries(["appointments"])}),{mutate:g}=L(re,{onSuccess:d=>{r.invalidateQueries(["appointments"])}});S.exports.useEffect(()=>{i||l({petName:n.petName,ownerName:n.ownerName,email:n.email,day:n.day,hour:n.hour,symptom:n.symptom})},[n]);const p=d=>{const v=new Date(d.target.value),I=T(v,"PPPP",{locale:j}),M=T(v,"HH:mm");l(x(f({},t),{day:I,hour:M}))},u=d=>{switch(d.target.id){case"petName":l(x(f({},t),{petName:d.target.value}));break;case"ownerName":l(x(f({},t),{ownerName:d.target.value}));break;case"email":l(x(f({},t),{email:d.target.value}));break;case"symptom":l(x(f({},t),{symptom:d.target.value}));break}},w=()=>{if(t.petName===""||t.ownerName===""||t.email===""||t.day===""||t.symptom===""){E("noData");return}else{try{i?s(t):g([n._id,t])}catch(d){console.log(d)}E("saveData")}},E=d=>{switch(d){case"noData":N.fire({title:"Error!",text:"No dejes campos sin rellenar",icon:"error",confirmButtonText:"OK"});break;case"saveData":N.fire({title:"OK!",text:i?"La cita se agend\xF3 correctamente":"La cita se actualiz\xF3 correctamente",icon:"success",showConfirmButton:!1,timer:2e3}),a({}),l(D);break}};return c(h,{container:!0,justifyContent:"center",children:[e(h,{item:!0,children:e(o,{variant:"h3",color:"#4a0788",marginY:"5%",children:i?"Agendar Cita Nueva":"Editar Cita"})}),e(m,{sx:{bgcolor:"white",boxShadow:2,borderRadius:2,marginLeft:1,width:"95%",alignSelf:"center"},children:e(K,{onSubmit:w,children:c(h,{container:!0,component:"form",noValidate:!0,autoComplete:"off",marginLeft:"20px",marginTop:"25px",children:[e(y,{type:"text",id:"petName",label:"Nombre Mascota",onChange:u,sx:{m:1,width:"47ch",alignSelf:"center"},value:t.petName}),e(y,{type:"text",id:"ownerName",label:"Propietario",onChange:u,sx:{m:1,width:"46ch",alignSelf:"center"},value:t.ownerName}),e(y,{id:"email",label:"Email / Tel\xE9fono",onChange:u,sx:{m:1,width:"47ch",alignSelf:"center"},type:"email",value:t.email}),e(y,{id:"date",sx:{m:1,width:"46ch",alignSelf:"center"},type:"datetime-local",onChange:p,value:t.date}),e(y,{type:"text",id:"symptom",label:"S\xEDntomas",onChange:u,sx:{m:1,width:"95ch",alignSelf:"center"},multiline:!0,maxRows:6,value:t.symptom}),e(C,{variant:"contained",sx:{m:1,width:"103ch",alignSelf:"center",marginBottom:4,marginTop:2,borderRadius:2,backgroundColor:"#4a0788"},onClick:w,children:i?"Agendar Cita Nueva":"Editar Cita"}),!i&&e(C,{variant:"contained",sx:{m:1,width:"103ch",alignSelf:"center",marginBottom:4,marginTop:-1,borderRadius:2,backgroundColor:"#4a0788"},onClick:()=>{a(D),l(D)},children:"Cancelar Editar"})]})})})]})};const me=new Date,ue=()=>{const[n,a]=S.exports.useState({}),[t,l]=S.exports.useState(me),{data:r,status:i}=z(["appointments"],ne),s=T(t,"PPPP",{locale:j}),g=r==null?void 0:r.filter(p=>p.day===s).sort((p,u)=>{if(p.hour<u.hour)return-1;if(u.hour>p.hour)return 1});return c(m,{children:[e(h,{children:e(le,{})}),c(h,{container:!0,p:3,bgcolor:"#cccccc33",minHeight:"100vh",children:[e(h,{item:!0,xs:12,md:6,children:e(de,{edit:n,setEdit:a,appointment:g})}),e(h,{item:!0,xs:12,md:6,children:e(se,{edit:n,setEdit:a,appointment:g,status:i,value:t,setValue:l})})]})]})},he=Y({palette:{primary:{defect:"#4e555a",main:"#4a0788"}}}),pe=new U;J.render(e(X.StrictMode,{children:e(Z,{theme:he,children:e(ee,{client:pe,children:e(ue,{})})})}),document.getElementById("root"));
